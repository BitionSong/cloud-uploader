const Logger = require('./logger');
const Store = require('./store');

const {
  login_qr_key,
  login_qr_create,
  login_qr_check,
  login_status,

  login_cellphone,
  login,
  cloud,
} = require('NeteaseCloudMusicApi');

class Api {
  constructor() {
    this.logger = null;
    this.proxy = undefined;

    this.init();
  }

  init() {
    this.logger = new Logger('UploaderWindow');

    this.proxy = this.getProxy();
  }

  // 待优化
  login_qr_key(option = {}) {
    option.proxy = this.proxy;
    return login_qr_key(option);
  }

  login_qr_create(option = {}) {
    option.proxy = this.proxy;
    return login_qr_create(option);
  }

  login_qr_check(option = {}) {
    option.proxy = this.proxy;
    return login_qr_check(option);
  }

  login_status(option = {}) {
    option.proxy = this.proxy;
    return login_status(option);
  }

  login_cellphone(option = {}) {
    option.proxy = this.proxy;
    return login_cellphone(option);
  }

  login(option = {}) {
    option.proxy = this.proxy;
    return login(option);
  }

  cloud(option = {}) {
    option.proxy = this.proxy;
    return cloud(option);
  }

  getProxy() {
    return Store.get('proxy');
  }
}

const ApiInstance = new Api();

module.exports = ApiInstance;
